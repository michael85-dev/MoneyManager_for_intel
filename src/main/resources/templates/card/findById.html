<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
<head>
    <meta charset="UTF-8">
    <title>Money Manager</title>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
</head>
<body>
<header>
    card findById page
    <a th:href="@{|/card/update/${cardId}|}">수정</a><a th:href="@{|/card/delete/${cardId}|}">삭제</a> <!-- 이거 지울때 credit, debit의 내용도 지워지게 설정해야함. / 미완 / Entity에서 진행 -->
</header>
<main>
    <div th:object="${cardDTO}">
        <span th:text="*{cardId}">번호</span>
        <span th:text="*{cardName}">카드명</span>
        <span th:text="*{cardTag}">카드종류</span>
        <span th:text="*{totalAsset}">사용 총액</span>
        <span th:text="*{cardMemo}">메모</span>
        <span th:text="*{cardPhotoName}">카드이미지</span>
    </div>
    <!-- 연동 카드 정보 전부 가지고 오기 -> 내역을 가지고 오는 것임... -->
    <div>
        <div th:if="${cardDTO.level eq '0'}">
            <div>
                <a th:href="@{|/debit/save/${cardDTO.cardId}|}">내역 생성</a>
            </div>
            <table>
                <thead>
                    <tr> <!-- 시간에 따라서 나가는 날이 설정되게 하는거... 어떻게 해야할까? -->
                        <th>번호</th>
                        <th>카드명</th>

                        <th>사용액</th>
                        <th>할인액</th>
                        <th>메모</th>
                        <th>영수증</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="de : ${dlist}">
                        <td th:value="${de.debitId}">번호</td>
                        <td th:value="${de.debitName}">
                            <a th:href="@{|/debit/${de.debitId}|}">
                                내역명
                            </a>
                        </td>

                        <td th:value="${de.minusAsset}">사용액</td>
                        <td>할인액</td>
                        <td th:value="${de.debitMemo}">메모</td>
                        <td>
                            <img th:src="" alt="X">
                            영수증
                        </td>
                    </tr>
                </tbody>
            </table>
            <div class="container">
                <ul class="pagination">
                    <li class="page-item">
                        <a class="page-link" th:href="@{/debit/(page=1)}">
                            <span>First</span>
                        </a>
                    </li>

                    <li th:class="${cPage.first} ? 'disabled'" class="page-item">
                        <a class="page-link" th:href="${cPage.first} ? '#' : @{/debit/(page=${cPage.number})}">
                            <span>&lt;</span>
                        </a>
                    </li>

                    <li th:each="page: ${#numbers.sequence(startPage, endPage)}"
                        th:class="${page == cPage.number + 1} ? 'active'" class="page-item">
                        <a class="page-link" th:text="${page}" th:href="@{/debit/(page=${page})}"></a>
                    </li>

                    <li th:class="${cPage.last} ? 'disabled'">
                        <a class="page-link" th:href="${cPage.last} ? '#' : @{/debit/(page=${cPage.number + 2})}">
                            <span>&gt;</span>
                        </a>
                    </li>

                    <li class="page-item">
                        <a class="page-link" th:href="@{/debit/(page=${cPage.totalPages})}">
                            <span>Last</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <div th:if="${cardDTO.level ne '0'}">
            <div>
                <a th:href="@{|/credit/save/${cardDTO.cardId}|}">내역 생성</a>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>번호</th>
                        <th>카드명</th>
                        <th>카드종류</th>
                        <th>총 사용액</th>
                        <th>메모</th>
                        <th>영수증</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="cr: ${clist}">
                        <td th:value="*{cr.creditId}">번호</td>
                        <td th:value="*{cr.creditName}">
                            <a th:href="@{|/credit/${cr.creditId}|}">
                                내역
                            </a>
                        </td>
                        <td th:value="*{cr.bankId}">연결은행</td> <!-- 연결 방법 확인 필요 -->
                        <td th:value="*{cr.minusAsset}">총 사용액</td>
                        <td th:value="*{cr.creditMemo}">메모</td>
                        <td>
                            <img th:src="" alt="">
                            영수증
                        </td>
                    </tr>
                </tbody>
            </table>
            <div class="container">
                <ul class="pagination">
                    <li class="page-item">
                        <a class="page-link" th:href="@{/credit/(page=1)}">
                            <span>First</span>
                        </a>
                    </li>

                    <li th:class="${cPage.first} ? 'disabled'" class="page-item">
                        <a class="page-link" th:href="${cPage.first} ? '#' : @{/credit/(page=${cPage.number})}">
                            <span>&lt;</span>
                        </a>
                    </li>

                    <li th:each="page: ${#numbers.sequence(startPage, endPage)}"
                        th:class="${page == cPage.number + 1} ? 'active'" class="page-item">
                        <a class="page-link" th:text="${page}" th:href="@{/credit/(page=${page})}"></a>
                    </li>

                    <li th:class="${cPage.last} ? 'disabled'">
                        <a class="page-link" th:href="${cPage.last} ? '#' : @{/credit/(page=${cPage.number + 2})}">
                            <span>&gt;</span>
                        </a>
                    </li>

                    <li class="page-item">
                        <a class="page-link" th:href="@{/credit/(page=${cPage.totalPages})}">
                            <span>Last</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</main>
<footer>

</footer>
</body>
</html>